# 北工大网关自动登录程序密码拙劣加密版

## by Ant

### 【太长不看版】

直接下载运行autolgn.exe文件就可以使用。请不要移动程序运行后产生的lgn.wc2s配置文件，否则再次打开程序时不能实现自动登录，需要再次输入用户名和密码，以重新生成配置文件。

这个程序完全本地运行，不会上传您的用户名和密码到服务器。

lgn.wc2s配置文件中存储着用户名和加密过的密码。加密的密钥是每台电脑唯一的处理器id运算得到的。所以，直接把程序和lgn.wc2s文件拷贝到别的电脑是无法成功登录的。同理，电脑换过cpu之后，也需要删除配置文件并生成新的配置文件。

即使密码经过加密存储了，这个程序的安全性仍然没有很高。因为他人只需要从一台登录过的电脑拷贝走lgn.wc2s，并且在这台电脑的cmd里查询到电脑的cpuid就可以计算出密码。

### 程序基本原理说明

此程序原理是使用requests这个Python库来实现自动登录网关。在运行本程序之后，会在本程序同目录下生成一个配置文件**lgn.wc2s**。这个配置文件中存储着用户名和加密过的密码。加密的密钥*（代码中的key1,key2,key3,key4）*其实是Windows系统wmic读的processorid的md5的前4位的ASCII码。*(可以说是非常笨非常懒了...只写了四位...)*  将密钥与原始密码经过极为简单*(真的非常简单)*的运算后，将结果写入了**lgn.wc2s**。每次程序运行时，会读取当前系统的处理器id并进行运算以解密密码，进行自动登录。也就是说，即使别人拷贝走了配置文件，也需要您电脑的处理器id才能知道您的密码、登录您的网关账号。

此程序的图形用户页面是使用python的tk编写的。这是我第一次使用tk，所以页面做的很丑，代码也得也很乱，请多多包涵！

此程序使用的是pyinstaller来生成exe文件。

此程序目前似乎无法在bjut_wifi下实现自动登录（因为经常得跳到wlgn.bjut.edu.cn登录，我目前只做了lgn.bjut.edu.cn页面的自动登录，不过连接bjut_wifi的设备校园网管理页面可以自行绑定无感知MAC地址），也无法在光猫下实现自动登录（多了一层光猫的认证页面，手动在光猫的认证页面输入完密码之后，可以用这个登录lgn网关。）。此程序适用于使用网线连接到宿舍墙上的网口，或者连接到交换机，或者路由器有线中继状态或者任何可以直接在lgn.bjut.edu.cn页面登录的场景。

如果想实现开机自动登录网关，可以将此程序放到'C:\ProgramData\Microsoft\Windows\Start Menu\Programs\StartUp'目录下。这个程序就会在每次开机后自动启动。

### macOS版说明

和Windows不同的是，macOS版本加密使用的是mac序列号的md5的前4位的ASCII码。

macOS版本只在我自己的intel处理器的mac上跑过（而且系统版本是古代的10.15.7）。还未在Apple芯片的Mac上测试过。

